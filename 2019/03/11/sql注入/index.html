<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>Yu'blog</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://yu231050383.wordpress.com/"><span>photos</span></a></li><li><a href="https://www.baidu.com/"><span>Baidu</span></a></li><li><a href="http://blog.lyoo.xyz/"><span>BlueShadow'blog</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button" for="navi">MENU</label><img class="background" src="https://i.loli.net/2019/02/02/5c554502b195c.jpg"><div class="post-title"><h1 class="title">随笔</h1><ul class="meta"><li><i class="icon icon-author"></i></li><li><i class="icon icon-clock"></i>2 Minutes</li><li><i class="icon icon-calendar"></i>March 11, 2019</li></ul></div></div><div class="article-content" style="max-width:800px"><hr>
<p>title: sql注入<br>date: 2019-03-11 16:56:03</p>
<h2 id="tags-sql注入"><a href="#tags-sql注入" class="headerlink" title="tags:sql注入"></a>tags:sql注入</h2><h2 id="sql注入基本步骤"><a href="#sql注入基本步骤" class="headerlink" title="sql注入基本步骤"></a>sql注入基本步骤</h2><h3 id="找注入点且得到闭合字符"><a href="#找注入点且得到闭合字符" class="headerlink" title="找注入点且得到闭合字符"></a>找注入点且得到闭合字符</h3><h3 id="判断数据库类型"><a href="#判断数据库类型" class="headerlink" title="判断数据库类型"></a>判断数据库类型</h3><h3 id="猜解列数，得到显示位"><a href="#猜解列数，得到显示位" class="headerlink" title="猜解列数，得到显示位"></a>猜解列数，得到显示位</h3><h3 id="得到基本信息-如：数据库名、数据库版本、当前数据库名等"><a href="#得到基本信息-如：数据库名、数据库版本、当前数据库名等" class="headerlink" title="得到基本信息(如：数据库名、数据库版本、当前数据库名等)"></a>得到基本信息(如：数据库名、数据库版本、当前数据库名等)</h3><h3 id="得到数据库名"><a href="#得到数据库名" class="headerlink" title="得到数据库名"></a>得到数据库名</h3><h3 id="得到表名"><a href="#得到表名" class="headerlink" title="得到表名"></a>得到表名</h3><h3 id="得到列名"><a href="#得到列名" class="headerlink" title="得到列名"></a>得到列名</h3><h3 id="得到列值"><a href="#得到列值" class="headerlink" title="得到列值"></a>得到列值</h3><ul>
<li>找到注入点且得到闭合符号<br><img src="https://i.loli.net/2019/03/11/5c8614c113783.png" alt=""><br>sql语句中 –空格 是注释的意思，在url中+号编码为空格<br>即   ‘id=1’– ‘   正常回显，–空格将最后的单引号注释掉了</li>
</ul>
<p>以下内容为部分程序代码:<br>$id=$GET[‘id’]; //接受get传递的参数名为id的值并赋值给变量id<br>$sql=”SELECT * FROM users WHERE id=’$id’ LIMIT 0,1”; // 把查询到的结果赋值给变量名sql<br>一对单引号为闭合字符</p>
<hr>
<ul>
<li>判断数据库类型<br>通过不同数据库不同的语法判断</li>
</ul>
<hr>
<ul>
<li>猜解列数，得显示位<br><img src="https://i.loli.net/2019/03/11/5c86192be1d58.png" alt=""><br>order by 4 错<br><img src="https://i.loli.net/2019/03/11/5c86196525a7a.png" alt=""><br>order by 3 对<br>得一共3列<br><img src="https://i.loli.net/2019/03/11/5c861a63f33a7.png" alt=""><br>爆出显示位为后两位，可以在2，3的位置做手脚</li>
</ul>
<hr>
<ul>
<li>得到基本信息<br>注：Mysql的CONCAT_WS函数，有分割符的字符串连接<br><img src="https://i.loli.net/2019/03/11/5c862191ddb99.png" alt=""></li>
</ul>
<hr>
<ul>
<li>得到数据库<br><img src="https://i.loli.net/2019/03/12/5c87631d7ba02.png" alt=""><br><img src="https://i.loli.net/2019/03/12/5c8766073ae20.png" alt=""></li>
</ul>
<hr>
<ul>
<li>得到security数据库的表名<br><img src="https://i.loli.net/2019/03/12/5c876c351df96.png" alt=""></li>
</ul>
<hr>
<ul>
<li>猜解列名<br><img src="https://i.loli.net/2019/03/12/5c876f891817e.png" alt=""></li>
</ul>
<hr>
<ul>
<li>猜解数据<br><img src="https://i.loli.net/2019/03/12/5c877132df21a.png" alt=""></li>
</ul>
</div><div class="article-meta" style="max-width:800px"></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cjw97vlvm000gwk9myxg9169l" data-title="" data-url="http://yoursite.com/2019/03/11/sql注入/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2019/03/22/md5绕过/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2019/03/09/正则表达试/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/Z3p5" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="http://space.bilibili.com/351207752?" title="Bilibili" target="_blank"><i class="icon icon-bilibili"></i></a></li><li><a href="https://i.loli.net/2019/02/03/5c56505a70706.png" title="Email" target="_blank"><i class="icon icon-email"></i></a></li><li><a href="https://i.loli.net/2019/02/02/5c54e137d2ffa.jpg" title="Wechat" target="_blank"><i class="icon icon-wechat"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2019 Yu'blog</p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>